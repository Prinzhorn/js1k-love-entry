<!doctype html>
<html>
	<head>
		<title>JS1k, 1k demo submission [ID]</title>
		<meta charset="utf-8" />
	</head>
	<body>
		<canvas id="c"></canvas>
		<script>
			var b = document.body;
			var c = document.getElementsByTagName('canvas')[0];
			var a = c.getContext('2d');
			document.body.clientWidth; // fix bug in webkit: http://qfox.nl/weblog/218
		</script>
		<script>
		//c.style.cursor = 'none';
		//c.style.width = '100%';
		//b.style.overflow = 'hidden';
		b.style.margin = 0;

		var
			s = c.width = c.height = 800,
			k = s/2,
			h = [[1, k, k, 'red']],
			z = 0,
			x = k, y = k,
			t = 0;

		setInterval(function kkk(i, l) {
			t = t + .005;
			x = y = Math.sin(t)*k/2+k;

			a.clearRect(0, 0, s, s);

			//Remove the FIRST element if the SECOND is big enough
			h[1]&&(h[1][0] > s)&&h.splice(0, 1);
			if(h[0]&&h[h.length - 1][0] > 1.15) h.push([1, x, y, 'rgb(' + ((Math.random()*55+200) | 0) + ',0,0)']);


			for(i = 0; i < h.length; i++) {
				l = h[i];
				l[0] *= 1.1;

				a.fillStyle = l[3];

				a.lineWidth = .1;
				a.strokeStyle = 'black';

				a.beginPath();
				a.arc(l[1] - l[0], l[2] - l[0], l[0], Math.PI*0.8, Math.PI*2);
				a.arc(l[1] + l[0], l[2] - l[0], l[0], Math.PI, Math.PI*2.2);
				a.lineTo(l[1], l[2] + l[0]*2);
				a.closePath();

				a.fill();
				a.stroke();
			}
		}, 33, 0);
		</script>
	</body>
</html>
